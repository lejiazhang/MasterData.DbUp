IF  EXISTS (SELECT 1 FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[sp_MSins_dboFP_FNCL_PROD_GRP]') AND type in (N'P', N'PC'))
	DROP PROCEDURE [dbo].[sp_MSins_dboFP_FNCL_PROD_GRP]
GO

CREATE PROCEDURE [dbo].[sp_MSins_dboFP_FNCL_PROD_GRP]
    @FNCL_PROD_GRP_ID INT,
    @SHRT_NME VARCHAR(100),
    @LONG_NME VARCHAR(100),
    @FINC_TYPE_KEY VARCHAR(25),
    @INSR_DTE DATETIME,
    @UPDT_DTE DATETIME,
    @EXEC_DTE DATETIME,
    @FLAG CHAR(1)
AS

BEGIN
    DECLARE @COMPANYID INT
    SET @COMPANYID = '$CompanyId$'

    IF (@FLAG = 'I')
		BEGIN TRY
			IF NOT EXISTS(SELECT * FROM FINANCIALGROUP WHERE FINANCIALGROUPID = @FNCL_PROD_GRP_ID AND COMPANYID = @COMPANYID)
				BEGIN	
					INSERT INTO [DBO].[FINANCIALGROUP](
						FINANCIALGROUPID,
						COMPANYID,
						GROUPNAME,
						GROUPFULLNAME,
						CREATIONDATE
					) VALUES (
					@FNCL_PROD_GRP_ID,
					@COMPANYID,
					@SHRT_NME,
					@LONG_NME,
					@INSR_DTE
					) 
				END
		END TRY
		BEGIN CATCH
			SELECT
			ERROR_NUMBER() AS ERRORNUMBER,
			ERROR_STATE() AS ERRORSTATE,
			ERROR_SEVERITY() AS ERRORSEVERITY,
			ERROR_PROCEDURE() AS ERRORPROCEDURE,
			ERROR_LINE() AS ERRORLINE,
			ERROR_MESSAGE() AS ERRORMESSAGE;
		END CATCH;
END  
GO